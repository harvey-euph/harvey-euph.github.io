---
title: "DPDK 自學紀錄 - 實際操作細節及指令"
date: 2025-10-28 00:00:00 +0800
categories: [Careers, Tech]
tags: [DPDK, Tech]
---

使用版本 v25.07

```sh
git clone http://dpdk.org/git/dpdk && cd dpdk
git checkout -b v25.07 v25.07
meson build -Dexamples=all -Dtests=true
ninja -C build
sudo ninja -C build install
sudo ldconfig
```

一番操作之後就編譯和安裝就完成了，之後每次要編譯只要回到 `dpdk` 使用 `ninja -C build` 或是用 `example/xxx` 裡面的 `Makefile` 就可以重新編譯。

運行還需要其他設置:

- DPDK 是一個接管整個網卡的應用程式，一旦把一張網卡交給他就會失去所有那張網卡該有的功能，要維持電腦其他網路功能的話就必須留著一張主網卡

```sh
sudo modprobe vfio-pci
sudo ifconfig ens37 down
sudo ifconfig ens38 down
cd /path/to/dpdk
./usertools/dpdk-devbind.py --status
sudo ./usertools/dpdk-devbind.py --bind=vfio-pci --noiommu-mode 0000:02:05.0
sudo ./usertools/dpdk-devbind.py --bind=vfio-pci --noiommu-mode 0000:02:06.0
```

- 需要設置 huge page

```sh
echo 512 | sudo tee /sys/kernel/mm/hugepages/hugepages-2048kB/nr_hugepages
cat /proc/meminfo | grep Huge
```
